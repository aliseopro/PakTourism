var Transfer={transferNumAdult:null,transferNumChild:null,transferNumInfant:null,resultTable:$("#transferResultTable div.result-row")},transferSearch={searchAutoCompleteIdFrom:null,searchAutoCompleteIdTo:null,searchUrlFrom:null,searchUrlTo:null,fromDate:null,toDate:null};$.extend($.ui.menu.prototype.options,{items:"> :not(.ui-autocomplete-category)"}),$(document).ready(function(){$("#sum-trf-prev").on("click",function(){var e=moment($("#summary-trf").val(),"ddd, MMM DD").subtract(1,"d");$("#transferDateSum").val(e.format("DD.MM.YYYY")),$("#summary-trf").val(e.format("ddd, MMM DD"))}),$("#sum-trf-next").on("click",function(){var e=moment($("#summary-trf").val(),"ddd, MMM DD").add(1,"d");$("#transferDateSum").val(e.format("DD.MM.YYYY")),$("#summary-trf").val(e.format("ddd, MMM DD"))}),$("#sum-trf-ret-prev").on("click",function(){var e=moment($("#summary-trf-ret").val(),"ddd, MMM DD").subtract(1,"d");$("#trfReturnDateSum").val(e.format("DD.MM.YYYY")),$("#summary-trf-ret").val(e.format("ddd, MMM DD"))}),$("#sum-trf-ret-next").on("click",function(){var e=moment($("#summary-trf-ret").val(),"ddd, MMM DD").add(1,"d");$("#trfReturnDateSum").val(e.format("DD.MM.YYYY")),$("#summary-trf-ret").val(e.format("ddd, MMM DD"))}),$("input.trf-people-count").on("change",function(){var a=0;$("input.trf-people-count").each(function(e,t){a+=parseInt($(t).val())}),$("#trfPax").val(a+" Traveller")}),$("#loading").modal({show:!1});var e=document.querySelectorAll("#transferSearchForm"),r=(Array.prototype.slice.call(e).forEach(function(t){t.addEventListener("submit",function(e){t.checkValidity()?(t.classList.add("was-validated"),$("#loading").modal("show")):(e.preventDefault(),e.stopPropagation())},!1)}),$.widget("custom.autocomplete",$.ui.autocomplete,{_renderMenu:function(a,e){var r=this,o="";$.each(e,function(e,t){t.category!=o&&(1==t.category?a.append("<li class='ui-autocomplete-category iconCity' >"+FmtMessage.getMessage("js.result.city")+"</li>"):4==t.category||3==t.category?a.append("<li class='ui-autocomplete-category iconDistrict' >"+FmtMessage.getMessage("js.result.district")+"</li>"):2==t.category?a.append("<li class='ui-autocomplete-category iconHotel' >"+FmtMessage.getMessage("js.result.hotel")+"</li>"):6==t.category&&a.append("<li class='ui-autocomplete-category iconAirport' >"+FmtMessage.getMessage("js.result.airport")+"</li>"),o=t.category),r._renderItemData(a,t)})},_renderItem:function(e,t){return t.label=t.value.replace(r,"<span class='searchTerm'>$1</span>"),$("<li></li>").data("item.autocomplete",t).append("<a>"+t.label+"</a>").appendTo(e)}}),null);$(".transferAutoComplete").click(function(){$(this).data("selected")||($(this).select(),$(this).data("selected",!0))}).focusout(function(){$(this).data("selected",!1);var e=this.value;$(this).data("label")!=e&&(this.value="",$("#"+this.id+"Id").val(""))}).autocomplete({source:function(t,a){var e=$("#"+$(this.element).data("dir")).val();$.ajax({url:"/transfer/locations",dataType:"json",data:{output:"json",results:100,query:t.term,otherAutoCompleteId:e},success:function(e){r=new RegExp("("+$.ui.autocomplete.escapeRegex(t.term)+")","gi"),a($.map(e,function(e){return{value:e.name,category:e.type,id:e.id}}))}})},minLength:2,open:function(e,t){$(".ui-autocomplete").off("menufocus hover mouseover mouseenter")},select:function(e,t){document.activeElement.blur(),$(this).data("label",t.item.value),$("#"+this.id+"Id").val(t.item.id),$("#"+this.id+"Type").val(t.item.category),1==$(this).attr("tabindex")?(transferSearch.searchAutoCompleteIdFrom=t.item.id,transferSearch.searchUrlFrom=t.item.value):(transferSearch.searchAutoCompleteIdTo=t.item.id,transferSearch.searchUrlTo=t.item.value)}}),$.ui.autocomplete.prototype._renderItem=function(e,t){return t.label=t.value.replace(r,"<span class='searchTerm'>$1</span>"),$("<li></li>").data("item.autocomplete",t).append("<a>"+t.label+"</a>").appendTo(e)},$(".priceDetailButton").click(function(){var e=$(this).data("transferid"),e=($("#selectedTransfer").val(e),$(this).data("categoryid"));return $("#selectedTransferCategory").val(e),$("#loading").modal("show"),$("#transferResult").submit(),!0})}),window.onbeforeunload=function(){var e,t=new Date;t.setTime(t.getTime()+864e5),$.cookie("transferSearchValues")&&(e=JSON.parse($.cookie("transferSearchValues")),transferSearch.searchAutoCompleteIdFrom||(transferSearch.searchAutoCompleteIdFrom=e.searchAutoCompleteIdFrom,transferSearch.searchUrlFrom=e.searchUrlFrom),transferSearch.searchAutoCompleteIdTo||(transferSearch.searchAutoCompleteIdTo=e.searchAutoCompleteIdTo,transferSearch.searchUrlTo=e.searchUrlTo),transferSearch.fromDate||(transferSearch.fromDate=e.fromDate),transferSearch.toDate||(transferSearch.toDate=e.toDate)),null!=transferSearch.searchAutoCompleteIdFrom&&$.cookie("transferSearchValues",JSON.stringify(transferSearch),{expires:t,path:"/"})};
//# sourceMappingURL=transferSearch.js.map
